<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Profile - Admin</title>
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/theme-cyber.css">
  <link rel="stylesheet" href="/admin/assets/css/admin.css">
</head>
<body>
  <div class="admin-container">
    <aside class="admin-sidebar">
      <div class="admin-logo">
        <h2>ğŸ¯ Portfolio CMS</h2>
      </div>
      <nav>
        <ul class="admin-nav">
          <li><a href="/admin/dashboard.html"><span class="admin-nav-icon">ğŸ“Š</span>Dashboard</a></li>
          <li><a href="/admin/profile/edit-profile.html" class="active"><span class="admin-nav-icon">ğŸ‘¤</span>Profile</a></li>
          <li><a href="/admin/skills/edit-skills.html"><span class="admin-nav-icon">âš¡</span>Skills</a></li>
          <li><a href="/admin/projects/edit-projects.html"><span class="admin-nav-icon">ğŸ’¼</span>Projects</a></li>
          <li><a href="/admin/blogs/edit-blogs.html"><span class="admin-nav-icon">ğŸ“</span>Blog Posts</a></li>
          <li><a href="/admin/media/upload.html"><span class="admin-nav-icon">ğŸ–¼ï¸</span>Media</a></li>
          <li><a href="/admin/settings/general.html"><span class="admin-nav-icon">âš™ï¸</span>Settings</a></li>
          <li><a href="/" target="_blank"><span class="admin-nav-icon">ğŸŒ</span>View Website</a></li>
          <li><a href="#" onclick="window.adminAuth.logout(); return false;"><span class="admin-nav-icon">ğŸšª</span>Logout</a></li>
        </ul>
      </nav>
    </aside>
    
    <main class="admin-main">
      <header class="admin-header">
        <h1>Edit Profile</h1>
        <div class="admin-user">
          <a href="/admin/dashboard.html" class="admin-btn admin-btn-secondary admin-btn-small">â† Back to Dashboard</a>
        </div>
      </header>
      
      <div id="save-message" style="display: none;"></div>
      
      <form id="profile-form">
        <div class="admin-card">
          <div class="admin-card-header">
            <h2 class="admin-card-title">Basic Information</h2>
          </div>
          <div class="admin-card-body">
            <div class="admin-grid admin-grid-2">
              <div class="admin-form-group">
                <label for="name">Full Name *</label>
                <input type="text" id="name" name="name" required>
              </div>
              
              <div class="admin-form-group">
                <label for="title">Professional Title *</label>
                <input type="text" id="title" name="title" required>
              </div>
            </div>
            
            <div class="admin-form-group">
              <label for="tagline">Tagline</label>
              <input type="text" id="tagline" name="tagline">
              <span class="admin-form-hint">A short description that appears on your homepage</span>
            </div>
            
            <div class="admin-form-group">
              <label for="bio">Bio / Objective</label>
              <textarea id="bio" name="bio"></textarea>
            </div>
            
            <div class="admin-form-group">
              <label for="dob">Date of Birth</label>
              <input type="text" id="dob" name="dob" placeholder="e.g., 2nd August 2003">
            </div>
          </div>
        </div>
        
        <div class="admin-card">
          <div class="admin-card-header">
            <h2 class="admin-card-title">Contact Information</h2>
          </div>
          <div class="admin-card-body">
            <div class="admin-grid admin-grid-2">
              <div class="admin-form-group">
                <label for="email">Email *</label>
                <input type="email" id="email" name="email" required>
              </div>
              
              <div class="admin-form-group">
                <label for="contact">Phone</label>
                <input type="text" id="contact" name="contact">
              </div>
            </div>
            
            <div class="admin-form-group">
              <label for="address_line1">Address Line 1</label>
              <input type="text" id="address_line1" name="address_line1">
            </div>
            
            <div class="admin-form-group">
              <label for="address_line2">Address Line 2</label>
              <input type="text" id="address_line2" name="address_line2">
            </div>
            
            <div class="admin-grid admin-grid-2">
              <div class="admin-form-group">
                <label for="address_city">City</label>
                <input type="text" id="address_city" name="address_city">
              </div>
              
              <div class="admin-form-group">
                <label for="address_state">State</label>
                <input type="text" id="address_state" name="address_state">
              </div>
              
              <div class="admin-form-group">
                <label for="address_pincode">Pincode</label>
                <input type="text" id="address_pincode" name="address_pincode">
              </div>
            </div>
          </div>
        </div>
        
        <div class="admin-card">
          <div class="admin-card-header">
            <h2 class="admin-card-title">Media</h2>
          </div>
          <div class="admin-card-body">
            <div class="admin-form-group">
              <label for="avatar">Avatar URL</label>
              <input type="text" id="avatar" name="avatar">
              <span class="admin-form-hint">Path to your profile image (e.g., /assets/images/profile/avatar.jpg)</span>
            </div>
            
            <div class="admin-form-group">
              <label for="resume">Resume URL</label>
              <input type="text" id="resume" name="resume">
              <span class="admin-form-hint">Path to your resume PDF (e.g., /assets/documents/resume.pdf)</span>
            </div>
          </div>
        </div>
        
        <div class="admin-flex admin-gap-1">
          <button type="submit" class="admin-btn">ğŸ’¾ Save Profile</button>
          <button type="button" class="admin-btn admin-btn-secondary" onclick="loadProfile()">ğŸ”„ Reset</button>
        </div>
      </form>
    </main>
  </div>
  
  <script src="/admin/assets/js/auth.js"></script>
  <script src="/admin/assets/js/guard.js"></script>
  <script src="/admin/assets/js/storage.js"></script>
  <script>
    async function loadProfile() {
      const data = await window.adminStorage.loadData('profile.json');
      
      if (data) {
        document.getElementById('name').value = data.name || '';
        document.getElementById('title').value = data.title || '';
        document.getElementById('tagline').value = data.tagline || '';
        document.getElementById('bio').value = data.bio || '';
        document.getElementById('dob').value = data.dob || '';
        document.getElementById('email').value = data.email || '';
        document.getElementById('contact').value = data.contact || '';
        document.getElementById('address_line1').value = data.address?.line1 || '';
        document.getElementById('address_line2').value = data.address?.line2 || '';
        document.getElementById('address_city').value = data.address?.city || '';
        document.getElementById('address_state').value = data.address?.state || '';
        document.getElementById('address_pincode').value = data.address?.pincode || '';
        document.getElementById('avatar').value = data.avatar || '';
        document.getElementById('resume').value = data.resume || '';
      }
    }
    
    document.getElementById('profile-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const profileData = {
        name: formData.get('name'),
        title: formData.get('title'),
        tagline: formData.get('tagline'),
        bio: formData.get('bio'),
        dob: formData.get('dob'),
        email: formData.get('email'),
        contact: formData.get('contact'),
        address: {
          line1: formData.get('address_line1'),
          line2: formData.get('address_line2'),
          city: formData.get('address_city'),
          state: formData.get('address_state'),
          pincode: formData.get('address_pincode')
        },
        avatar: formData.get('avatar'),
        resume: formData.get('resume')
      };
      
      const result = window.adminStorage.saveData('profile.json', profileData);
      
      const messageEl = document.getElementById('save-message');
      if (result.success) {
        messageEl.className = 'admin-alert admin-alert-success';
        messageEl.textContent = 'âœ… ' + result.message;
      } else {
        messageEl.className = 'admin-alert admin-alert-error';
        messageEl.textContent = 'âŒ Error: ' + result.message;
      }
      messageEl.style.display = 'block';
      
      window.scrollTo(0, 0);
      
      setTimeout(() => {
        messageEl.style.display = 'none';
      }, 5000);
    });
    
    // Load profile on page load
    loadProfile();
  </script>
</body>
</html>
